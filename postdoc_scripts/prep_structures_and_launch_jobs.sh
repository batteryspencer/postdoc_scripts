#!/bin/bash

dirList=('H' 'CH4' 'C3H8' 'C3H7_1Propyl' 'C3H7_2Propyl' 'C3H7_H_1PropylH' 'C3H7_H_2PropylH' 'C3H6')
molecule_list=(\'H\' \'CH4\' \'C3H8\' \'C3H7\' \'C3H7\' \'C3H8\' \'C3H8\' \'C3H6\')
height_list=(0.966 3.630 3.920 1.345 1.388 1.354 1.403 1.349)  # 57 % of ontop heights except CH4, C3H8
mol_position_list=([(0, 0, 0)]
                   [(0.0, 0.0, 0.0), (0.6, 0.6, 0.6), (-0.6, -0.6, 0.6), (0.6, -0.6, -0.6), (-0.6, 0.6, -0.6)]
                   [(0.0, 0.0, 0.0), (-1.0, 1.2, -0.0), (-0.7, -1.3, 0.0), (0.7, 0.1, 0.9), (0.7, 0.0, -0.9), (-0.4, 2.1, -0.1), (-0.0, -2.2, 0.0), (-1.6, 1.1, -0.9), (-1.6, 1.2, 0.9), (-1.4, -1.4, 0.9), (-1.4, -1.5, -0.8)]
                   [(0.0, 0.0, 0.0), (0.3, 1.3, 0.8), (-0.8, 2.2, 1.0), (0.7, 0.9, 1.8), (1.2, 1.8, 0.3), (-0.5, 3.1, 1.6), (0.8, -0.8, 0.2), (-1.2, 2.6, 0.1), (-1.7, 1.7, 1.5), (-1.0, -0.4, 0.3)]
                   [(0.0, 0.0, 0.0), (-0.9, 1.1, 0.6), (-0.3, -1.4, 0.6), (1.1, 0.2, 0.1), (-0.6, 2.1, 0.2), (0.3, -2.2, 0.2), (-1.9, 0.9, 0.4), (-0.7, 1.1, 1.7), (-0.2, -1.3, 1.7), (-1.4, -1.7, 0.4)]
                   [(0.0, 0.0, 0.0), (0.4, 1.2, 0.8), (-0.8, 2.2, 1.0), (0.7, 0.9, 1.8), (1.2, 1.8, 0.4), (-0.5, 3.1, 1.6), (0.7, -0.8, 0.2), (-1.1, 2.6, 0.1), (-1.6, 1.8, 1.5), (-1.0, -0.4, 0.2), (-5.4, 0.1, -0.7)]
                   [(0.0, 0.0, 0.0), (-0.9, 1.1, 0.6), (-0.3, -1.4, 0.6), (1.0, 0.3, 0.2), (-0.7, 2.1, 0.2), (0.4, -2.1, 0.2), (-2.0, 0.9, 0.4), (-0.8, 1.1, 1.7), (-0.2, -1.3, 1.7), (-1.3, -1.7, 0.3), (-5.4, -0.0, -0.8)]
                   [(0.0, 0.0, 0.0), (0.5, 1.3, 0.1), (-0.4, 2.4, 0.7), (1.5, 1.5, 0.2), (-0.1, 3.4, 0.4), (0.7, -0.8, 0.1), (-1.5, 2.3, 0.5), (-0.2, 2.4, 1.8), (-1.0, -0.2, 0.2)]
                   )
ads_position_list=(
    "(5.642, 3.256)"
    "(5.642, 3.256)"
    "(5.642, 3.256)"
    "(5.642, 3.256)"
    "(5.642, 3.256)"
    "(5.642, 3.256)"
    "(5.642, 3.256)"
    "(5.293, 2.652)"
)

i=0
for dir in ${dirList[*]}
    do
        echo $dir
        if ! test -d $dir; then
            mkdir $dir
        fi
        cp add_adsorbate_master.py add_adsorbate.py
        sed -i "s/ads_mol/${molecule_list[$i]}/g" add_adsorbate.py
        sed -i "s/height_value/${height_list[$i]}/g" add_adsorbate.py
        sed -i "s/mol_pos_value/${mol_position_list[$i]}/g" add_adsorbate.py
        sed -i "s/ads_pos_value/${ads_position_list[$i]}/g" add_adsorbate.py
        mv add_adsorbate.py $dir
        
        cp submit_master.sh submit.sh
        sed -i "s/ads/${dir}/g" submit.sh
        mv submit.sh $dir
        
        cp generate_input_files.py $dir
        cp restart.json $dir
        
        cd $dir
        python add_adsorbate.py
        # sbatch submit.sh
        cd ../
        
        i=$(( i + 1))
    done
